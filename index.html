<!DOCTYPE html>
<html>
<head>
	<title>Badsyntax on Github</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<link rel="stylesheet" type="text/css" media="screen" href="/css/screen.css" />
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
	<script type="text/javascript" src="/js/global.js"></script>
	<!--[if IE]>
		<script type="text/javascript" src="/js/html5.js"></script>
	<![endif]-->
</head>
<body>

	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-1636725-23']);
		_gaq.push(['_trackPageview']);
		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>	

	<div id="github-ribbon">
	
		<a href="http://github.com/badsyntax">
			<img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub" />
		</a>

	</div>

	<div id="wrapper">

		<header>

			<h1>Richard Willis</h1>

			<p>Welcome to my area on github.</p>

		</header>

		<nav>
			<ul class="helper-clearfix">
				<li>
					<a href="#">Home</a>
				</li>
				<li>
					<a href="#projects">Projects</a>
				</li>
				<li>
					<a href="#links">Links</a>
				</li>
				<li>
					<a href="#contact">Contact</a>
				</li>
			</ul>
		</nav>

		<section id="activity">
			<p>
				<img src="/img/ajax_load.gif" id="loader" /> Loading activity..
			</p>
		</section>


		<script type="text/javascript">

			var list = $('<ul>'), repos = [], author = 'badsyntax', latest, ts = 0;

			$.getJSON('http://rest.badsyntax.co.uk/github/get_repos/' + author + '?jsoncallback=?', function(data){

				$.each(data, function( i, item ){

					repos.push( item.name );

					list.append( $('<li>').html( item.name ) );
				});

				var i = 0;

				function getCommits( callback, finished ){

					$.getJSON('http://rest.badsyntax.co.uk/github/get_commits/' + author + '/' + repos[i] + '/master?jsoncallback=?', function(data){

						callback(data, repos[i]);
						
						i++;

						if ( i < repos.length ) {

							getCommits.apply(this, [ callback, finished ]);
						} else {

							finished.apply();
						}
					});
				}

				function callback(data, repo){

					$.each(data, function(i, commit){

						var 
							segments = commit.committed_date.split('T'),

							matches = segments[1].match(/([0-9]+:[0-9]+:[0-9]+)(.*)/),

							d = segments[0].split('-'), 

							t = matches[1].split(':'),

							timestamp = new Date( d[0], d[1], d[2], t[0], t[1], t[2] );

							if (timestamp.getTime() > ts ) {
								latest = commit;
								ts = timestamp.getTime();
							}
					});

					console.debug(latest);
				}

				function finished(){

					$('#loader').remove();
				
					list.appendTo( $('#activity').empty() );
				}

				getCommits(callback, finished);
			});
		</script>

		<div class="helper-hidden">
		<section>
		<h2>- Projects</h2>
			<ul id="projects">
				<li>
					<a href="http://github.com/badsyntax/jquery-plugins">jquery-plugins</a>
					<ul>
						<li>
							<a href="http://github.com/badsyntax/jquery-plugins/tree/master/tree/">ui tree</a>
							<ul>
								<li><a href="http://github.com/badsyntax/jquery-plugins/tree/master/tree/">Source</a></li>
							</ul>
						</li>
						<li>
							<a href="http://github.com/badsyntax/jquery-plugins/tree/master/splitbutton/">ui splitbutton</a>
							<ul>
								<li><a href="http://github.com/badsyntax/jquery-plugins/tree/master/splitbutton/">Source</a></li>
								<li><a href="http://badsyntax.github.com/splitbutton.html">Demo</a></li>
							</ul>
						</li>
						<li>
							<a href="http://github.com/badsyntax/jquery-plugins/tree/master/scrollbar/">ui scrollbar</a>
							<ul>
								<li><a href="http://github.com/badsyntax/jquery-plugins/tree/master/scrollbar/">Source</a></li>
							</ul>
						</li>
					</ul>
				</li>
				<li>
					<a href="http://github.com/badsyntax/jquery-spellchecker">jquery-spellchecker</a>
					<ul>
						<li><a href="http://github.com/badsyntax/jquery-spellchecker">Source</a></li>
						<li><a href="#">http://spellchecker.jquery.badsyntax.co.uk/</a></li>
					</ul>
				</li>
				<li>
					<a href="http://github.com/badsyntax/jquery-youtube-player">jquery-youtube-player</a>
					<ul>
						<li><a href="http://github.com/badsyntax/jquery-youtube-player">Source</a></li>
						<li><a href="http://dubstep.uk.net">Demo</a></li>
					</ul>
				</li>
				<li>
					<a href="http://github.com/badsyntax/domwalker.js">domwalker.js</a>
					<ul>
						<li><a href="http://github.com/badsyntax/domwalker.js">Source</a></li>
						<li><a href="#">http://badsyntax.co.uk/replace-text-in-html-natively.html</a></li>
					</ul>
				</li>
				<li>
					<a href="http://github.com/badsyntax/itunes-utils">itunes-utils</a>
					<ul>
						<li><a href="http://github.com/badsyntax/itunes-utils">Source</a></li>
					</ul>
				</li>
				<li>
					<a href="http://github.com/badsyntax">View all projects</a>
				</li>
			</ul>

			<script type="text/javascript">
				$('#projects').find('ul').hide().end().toggleNav({ speed: 220 });
			</script>
		</section>


			<!--
			<h2>- Demos:</h2>
			<ul>
				<li><a href="splitbutton.html">Split button</a></li>
			</ul>
			-->
		<section>
			<h2>- Contact</h2>
			<ul>
				<li><a href="mailto:willis.rh@gmail.com">willis.rh@gmail.com</a></li>
			</ul>
		</section>

		<section>
			<h2>- On the web</h2>
			<ul>
				<li><a href="http://twitter.com/badsyntax">twitter.com/badsyntax</a></li>
			</ul>
		</section>
		</div>
	</div>

</body>
</html>
